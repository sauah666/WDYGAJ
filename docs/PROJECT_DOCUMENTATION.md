# üìò PROJECT DOCUMENTATION ‚Äî v1.3

**–ü—Ä–æ–µ–∫—Ç:** Agent-based Job Search Automation  
**–ê—É–¥–∏—Ç–æ—Ä–∏—è:** LLM-–∞–≥–µ–Ω—Ç-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ (Gemini / GPT / Claude)  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞  
**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ä–µ–∂–∏–º:** slow-iteration, 1 step = 1 prompt  

---

## CANONICAL MASTER PLAN v1.0

MASTER PLAN v1.0 ‚Äî JobSearch Agent (Mode 1: HH.ru, –∑–∞—Ç–µ–º –º—É–ª—å—Ç–∏—Å–∞–π—Ç)

0) –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
0.1 –¶–µ–ª—å –ø—Ä–æ–¥—É–∫—Ç–∞ (–∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
–ê–≥–µ–Ω—Ç —Å —Ä–µ–∂–∏–º–∞–º–∏. –†–µ–∂–∏–º 1: –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–∞–π—Ç–µ (—Ç–µ—Å—Ç–æ–≤—ã–π: hh.ru) —Å UI-–≤—ã–±–æ—Ä–æ–º —Å–∞–π—Ç–∞, –ø–æ—Å–ª–µ —Ä—É—á–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞ ‚Äî –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:
- –ø—Ä–æ—Ñ–∏–ª—å —á–∏—Ç–∞–µ—Ç—Å—è –∏ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ (—Å reset),
- LLM –æ–¥–∏–Ω —Ä–∞–∑ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥ (RU/EN —Ç–∏—Ç—É–ª—ã, —É—Ä–æ–≤–Ω–∏, —Ç–∏–ø—ã —Ä–æ–ª–µ–π, –≤–µ—Å–∞ –º–∞—Ç—á–µ–π),
- –∞–≥–µ–Ω—Ç —Å–Ω–∏–º–∞–µ—Ç DOM –ø–æ–∏—Å–∫–∞, LLM –æ–¥–∏–Ω —Ä–∞–∑ —Å—Ç—Ä–æ–∏—Ç —Å–µ–º–∞–Ω—Ç–∏–∫—É —Ñ–∏–ª—å—Ç—Ä–æ–≤,
- –∞–≥–µ–Ω—Ç –æ–¥–∏–Ω —Ä–∞–∑ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –∏ —Å–∞–º –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫,
- –≤–∞–∫–∞–Ω—Å–∏–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –±–∞—Ç—á–∞–º–∏ 10‚Äì15 –∏ –æ—Ü–µ–Ω–∏–≤–∞—é—Ç—Å—è LLM –±–∞—Ç—á–∞–º–∏,
- —Ç–µ–∫—Å—Ç –≤–∞–∫–∞–Ω—Å–∏–π —á–∏—Ç–∞–µ—Ç—Å—è —á–∞—Å—Ç–∏—á–Ω–æ: —Ç–æ–ª—å–∫–æ —É—Å–ª–æ–≤–∏—è/—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è/—Ñ–æ—Ä–º–∞—Ç —Ä–∞–±–æ—Ç—ã,
- –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∞–≥–µ–Ω—Ç —Å–∞–º –æ—Ç–∫–ª–∏–∫–∞–µ—Ç—Å—è, –≤—Å—Ç–∞–≤–ª—è—è —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ (cover Letter),
- –µ—Å–ª–∏ –∞–Ω–∫–µ—Ç—ã/–≤–æ–ø—Ä–æ—Å—ã ‚Äî DOM-—Å–∫–∞–Ω ‚Üí LLM –≥–µ–Ω–µ—Ä–∏—Ç –æ—Ç–≤–µ—Ç—ã —Å—Ç—Ä–æ–≥–æ –ø–æ –ø—Ä–æ—Ñ–∏–ª—é ‚Üí –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞,
- —Ä–µ—Ç—Ä–∞–∏ 3√ó, –∏–Ω–∞—á–µ —Å–∫—Ä—ã—Ç—å –≤–∞–∫–∞–Ω—Å–∏—é,
- –ø–∞–º—è—Ç—å: —Å–∞–π—Ç—ã, DOM-—Å–Ω–∏–º–∫–∏, –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏, dedup –ø–æ –≥–æ—Ä–æ–¥–∞–º (–≤—ã–±–∏—Ä–∞–µ–º –≥–æ—Ä–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è),
- –∫–æ–Ω—Ñ–∏–≥ LLM: cloud API / local LLM, –∫–ª—é—á–∏ –≤ env, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞, reset,
- –ª–æ–≥ –ø–æ—Å–ª–µ —Å–µ—Å—Å–∏–∏: input tokens, cache hit/miss, output tokens, –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π pruning/compaction, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–∫–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

0.2 –ü—Ä–æ—Ü–µ—Å—Å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (–±–µ–∑ –Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç —Ä–∞–∑–≤–∞–ª–∏—Ç—Å—è –ø–æ—Å–ª–µ reset)
- 1 —ç—Ç–∞–ø = 1 –∑–∞–¥–∞—á–∞ = EXECUTE + VERIFY
- –ü–æ—Å–ª–µ PASS: –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (–∏–Ω–∞—á–µ PASS —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º)
- –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å: ProfileSnapshot, TargetingSpec, SearchUISpec, SearchApplyPlan
- ResetSession ‚â† ResetProfile ‚â† ResetPrefs ‚â† ResetLLMConfig
- LLM ‚Äî —Ä–µ–¥–∫–∏–π —ç–∫—Å–ø–µ—Ä—Ç: –Ω–∏–∫–∞–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Äú–ø–æ –æ–¥–Ω–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏‚Äù
- –ë–∞—Ç—á–∏: 10‚Äì15 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–∫–∞—Ä—Ç–æ—á–∫–∏ / –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã)

1) –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–æ—á–∫–∞ ‚Äú—á—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ‚Äù (DONE)
... (Previous checkpoints preserved)
‚úÖ Done-F1: DOM Drift Detection
‚úÖ Done-F2: Site Memory & Multi-Site Readiness
‚úÖ Done-G1: LLM Provider Registry
- WHAT ADDED: `LLMProviderRegistry` domain entity, `activeLLMProviderId` config.
- BEHAVIOR: 
  - Allows switching between Mock, Gemini (Cloud), OpenAI (Cloud - disabled), Local (disabled).
  - Validates API Keys before allowing run.
  - UI visualizes `LLM_CONFIG_ERROR` state if keys are missing.
  - Added "Reset LLM Config" to settings.

2) MASTER PLAN ‚Äî –æ—Ç ‚Äú—Å–µ–π—á–∞—Å‚Äù –¥–æ ‚Äú—Ñ–∏–Ω–∏—à–∞‚Äù
PHASE G ‚Äî LLM Config, Token Telemetry, Compaction
‚úÖ G1. LLM Provider Registry (cloud/local) + env keys + reset
G2. Token Ledger per Session (input/output/cache hit/miss)
G3. Pruning/Compaction + –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç + –±–∞—Ç—á–∏–Ω–≥ 10‚Äì15

3) –ö–æ–Ω–µ—Ü –ø—Ä–æ–µ–∫—Ç–∞ (Definition of Done)
–ü—Ä–æ–µ–∫—Ç ‚Äú—Å–¥–µ–ª–∞–Ω‚Äù, –∫–æ–≥–¥–∞ –Ω–∞ hh.ru –∞–≥–µ–Ω—Ç –ø–æ—Å–ª–µ —Ä—É—á–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞:
- –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã,
- –∏—â–µ—Ç –≤–∞–∫–∞–Ω—Å–∏–∏,
- –æ—Ç–±–∏—Ä–∞–µ—Ç –±–∞—Ç—á–∞–º–∏,
- —á–∏—Ç–∞–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã,
- –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–∫–ª–∏–∫–∏,
- –∑–∞–ø–æ–ª–Ω—è–µ—Ç –∞–Ω–∫–µ—Ç—ã,
- –≤–µ–¥—ë—Ç –ø–∞–º—è—Ç—å seen/dedup/city,
- –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç LLM –ª–∏—à–Ω–∏–π —Ä–∞–∑,
- –¥–∞—ë—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é —Ç–æ–∫–µ–Ω–æ–≤.
UI: –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞/—Å–∞–π—Ç–∞/–Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ reset‚Äô–æ–≤.
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–æ–≤–æ–º—É –∞–≥–µ–Ω—Ç—É –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ –∏—Å—Ç–æ—Ä–∏–∏.

4) –¢–µ–∫—É—â–∞—è —Ç–æ—á–∫–∞
–ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π —ç—Ç–∞–ø: PHASE G1 ‚Äî LLM Provider Registry
–¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø: PHASE G2 ‚Äî Token Ledger (Refinement)

## Reset Matrix

| Action | Clears State | Clears Config | Clears Profile | Clears Cache (Targeting/UI/Answers) |
| :--- | :--- | :--- | :--- | :--- |
| **Reset Session** | YES (Active*) | NO | NO | NO |
| **Reset Profile** | YES | NO | YES | YES (All dependent artifacts) |
| **Reset Config** | NO | YES | NO | NO |
| **Reset LLM** | NO | NO | NO | NO (Only resets provider choice & key) |
| **Full Wipe** | YES | YES | YES | YES |
